import javax.swing.*;
import javax.swing.table.DefaultTableModel;
import java.awt.*;
import java.sql.*;
import java.awt.event.*;

public class deptReport implements ActionListener{
JFrame frame, frame1;
//JTextField textbox;
JLabel label;
JButton button;
JPanel panel;
static JTable table;


String[] columnNames = {"Id","Name","Designation","Department id","Father's Name","Mobile No","Appointment","Category","Gender","Marital Status","Blood Group","PAN","Address"};

public void createUI()
{
frame = new JFrame("Database Search Result");
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
frame.setLayout(null);
//textbox = new JTextField();
//textbox.setBounds(120,30,150,20); 
label = new JLabel("Department Report");
label.setBounds(100, 30, 100, 20);
button = new JButton("Show");
button.setBounds(220,130,150,20);
button.addActionListener(this);

//frame.add(textbox);
frame.add(label);
frame.add(button);
frame.setVisible(true);
frame.setSize(500, 400); 
} 

public void actionPerformed(ActionEvent ae)
{
button = (JButton)ae.getSource();
System.out.println("Showing Table Data.......");
showTableData(); 
} 

public void showTableData()
{

frame1 = new JFrame("Database Search Result");
frame1.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
frame1.setLayout(new BorderLayout()); 

DefaultTableModel model = new DefaultTableModel();
model.setColumnIdentifiers(columnNames);

table = new JTable();
table.setModel(model); 
table.setAutoResizeMode(JTable.AUTO_RESIZE_ALL_COLUMNS);
table.setFillsViewportHeight(true);
JScrollPane scroll = new JScrollPane(table);
scroll.setHorizontalScrollBarPolicy(
JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);
scroll.setVerticalScrollBarPolicy(
JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED); 
//String textvalue = textbox.getText();
String eid="";
     String ename="";
      String desg="";
         String did="";
        String fname="";//String dob="";;
      String ph="";
      String appnt="";
      String ctgry="";
      String gen="";
      String mstatus="";
       //String bgrp="";
      String doj="";
      String pan="";
      String add="";

try
{ 
Class.forName("sun.jdbc.odbc.JdbcOdbcDriver"); 
Connection con = DriverManager.getConnection("jdbc:odbc:mydsn");
String sql = "select * from department";
Statement ps = con.createStatement();
ResultSet rs = ps.executeQuery(sql);
int i =0;
//if(rs.next())  	//1 record-if ,many records-while
while(rs.next())
{
 eid= rs.getString("eId");
           ename = rs.getString("eName");
           desg = rs.getString("eDesg");
           did = rs.getString("eDid");
           fname=rs.getString("eFatherName");
           ph=rs.getString("ePhoneNo");
           appnt=rs.getString("eAppntmt");
           ctgry=rs.getString("eCtgry");
           gen=rs.getString("eGen");
           mstatus=rs.getString("eMstatus");
           bgrp=rs.getString("eBgrp");
           doj=rs.getString("eDoj");
           pan=rs.getString("ePan");
           add=rs.getString("eAdd");


model.addRow(new Object[]{fname,eid,ename,desg,did,ph,appnt,ctgry,gen,mstatus,bgrp,doj,pan,add});
i++; 
}

if(i <1)
{
JOptionPane.showMessageDialog(null, "No Record Found","Error",
JOptionPane.ERROR_MESSAGE);
}
if(i ==1)
{
System.out.println(i+" Record Found");
}
else
{
System.out.println(i+" Records Found");
}
}
catch(Exception ex)
{
JOptionPane.showMessageDialog(null, ex.getMessage(),"Error",
JOptionPane.ERROR_MESSAGE);
}
frame1.add(scroll);
frame1.setVisible(true);
frame1.setSize(400,300);
}

public static void main(String args[])
{
deptReport sr = new deptReport();
sr.createUI(); 
}
}